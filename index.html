<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>é€²åˆ¶è½‰æ›å™¨</title>
<style>
body{
  font-family:"Noto Sans TC","Microsoft JhengHei",sans-serif;
  background:#f7f9fc;color:#222;
  max-width:900px;margin:auto;padding:20px;
  line-height:1.6;
}
h1{color:#004a7f;text-align:center;}
fieldset{
  border:2px solid #004a7f;border-radius:8px;padding:15px;margin-bottom:20px;background:#fff;
}
label{display:block;margin:10px 0 6px;font-weight:bold;}
input{
  width:100%;padding:8px;font-size:16px;border:1px solid #ccc;border-radius:4px;
}
button{
  margin-top:10px;background:#004a7f;color:#fff;
  border:none;padding:10px 18px;border-radius:6px;cursor:pointer;
}
button:hover{background:#0074d9;}
.output{background:#fff;border:1px solid #ccc;border-radius:6px;padding:10px;margin-top:15px;white-space:pre-wrap;}
h2{color:#004a7f;margin-top:30px;}
@media(max-width:600px){
  input{font-size:15px;}
}
</style>
</head>
<body>

<h1>ğŸ”¢â€¯é€²åˆ¶è½‰æ›å™¨ï¼‰</h1>

<p>è¼¸å…¥ä»»ä¸€æ•¸å­—ï¼ˆåé€²ã€äºŒé€²ã€åå…­é€²çš†å¯ï¼‰ï¼Œç³»çµ±æœƒè‡ªå‹•è½‰æ›æˆå…¶ä»–å…©é€²åˆ¶ä¸¦é¡¯ç¤ºã€Œåˆ—å¼éç¨‹ã€ã€‚</p>

<fieldset>
  <label for="dec">åé€²åˆ¶ (Baseâ€¯10)ï¼š</label>
  <input id="dec" type="text" placeholder="ä¾‹å¦‚ï¼š45">
  
  <label for="bin">äºŒé€²åˆ¶ (Baseâ€¯2)ï¼š</label>
  <input id="bin" type="text" placeholder="ä¾‹å¦‚ï¼š101101">
  
  <label for="hex">åå…­é€²åˆ¶ (Baseâ€¯16)ï¼š</label>
  <input id="hex" type="text" placeholder="ä¾‹å¦‚ï¼š2D">

  <button onclick="convertFrom('dec')">å¾åé€²åˆ¶è½‰æ›</button>
  <button onclick="convertFrom('bin')">å¾äºŒé€²åˆ¶è½‰æ›</button>
  <button onclick="convertFrom('hex')">å¾åå…­é€²åˆ¶è½‰æ›</button>
</fieldset>

<div class="output" id="steps"></div>

<script>
function convertFrom(type){
  const decInput=document.getElementById("dec");
  const binInput=document.getElementById("bin");
  const hexInput=document.getElementById("hex");
  const steps=document.getElementById("steps");
  let decVal,binVal,hexVal,log="";

  function toBinarySteps(n){
    if(n===0) return "0\n(0 Ã· 2 = 0)";
    let quotient=n,remainder,bits=[],lines=[];
    while(quotient>0){
      remainder=quotient%2;
      lines.push(`${quotient} Ã· 2 = ${Math.floor(quotient/2)} ...â€¯${remainder}`);
      bits.unshift(remainder);
      quotient=Math.floor(quotient/2);
    }
    return lines.join("\n") + `\nâ¡ï¸â€¯äºŒé€²åˆ¶â€¯=â€¯${bits.join("")}`;
  }

  function toHexSteps(n){
    if(n===0) return "0\n(0 Ã· 16 = 0)";
    const map="0123456789ABCDEF";
    let q=n,r,hex=[],lines=[];
    while(q>0){
      r=q%16;
      lines.push(`${q} Ã· 16 = ${Math.floor(q/16)} ...â€¯${map[r]}`);
      hex.unshift(map[r]);
      q=Math.floor(q/16);
    }
    return lines.join("\n") + `\nâ¡ï¸â€¯åå…­é€²åˆ¶â€¯=â€¯${hex.join("")}`;
  }

  function binaryToDecimalSteps(s){
    const bits=s.split("").reverse();
    let sum=0,lines=[];
    bits.forEach((b,i)=>{
      const val=Number(b)*(2**i);
      sum+=val;
      lines.push(`ä½â€¯${i}ï¼š${b}â€¯Ã—â€¯2^${i}â€¯=â€¯${val}`);
    });
    lines.push(`â¡ï¸â€¯åé€²åˆ¶â€¯=â€¯${sum}`);
    return lines.join("\n");
  }

  function hexToDecimalSteps(s){
    s=s.toUpperCase();
    const map="0123456789ABCDEF";
    const chars=s.split("").reverse();
    let sum=0,lines=[];
    chars.forEach((c,i)=>{
      const val=map.indexOf(c)* (16**i);
      sum+=val;
      lines.push(`ä½â€¯${i}ï¼š${c}â€¯Ã—â€¯16^${i}â€¯=â€¯${val}`);
    });
    lines.push(`â¡ï¸â€¯åé€²åˆ¶â€¯=â€¯${sum}`);
    return lines.join("\n");
  }

  try{
    if(type==="dec"){
      decVal=parseInt(decInput.value);
      if(isNaN(decVal)){alert("è«‹è¼¸å…¥æ­£ç¢ºåé€²åˆ¶æ•¸å­—");return;}
      binVal=decVal.toString(2);
      hexVal=decVal.toString(16).toUpperCase();

      log=`ğŸ§®â€¯å¾åé€²åˆ¶â€¯${decVal}â€¯è½‰æ›ï¼š
-----------------------------------
[åé€² â†’ äºŒé€²]
${toBinarySteps(decVal)}

-----------------------------------
[åé€² â†’ åå…­é€²]
${toHexSteps(decVal)}

çµæœï¼š
äºŒé€²åˆ¶â€¯=â€¯${binVal}
åå…­é€²åˆ¶â€¯=â€¯${hexVal}`;
    }
    else if(type==="bin"){
      let s=binInput.value.trim();
      if(!/^[01]+$/i.test(s)){alert("è«‹è¼¸å…¥æ­£ç¢ºäºŒé€²åˆ¶æ•¸å­—ï¼Œåƒ…å«0èˆ‡1");return;}
      decVal=parseInt(s,2);
      hexVal=decVal.toString(16).toUpperCase();
      decInput.value=decVal;
      hexInput.value=hexVal;

      log=`ğŸ§®â€¯å¾äºŒé€²åˆ¶â€¯${s}â€¯è½‰æ›ï¼š
-----------------------------------
[äºŒé€² â†’ åé€²]
${binaryToDecimalSteps(s)}

-----------------------------------
[åé€² â†’ åå…­é€²]
${toHexSteps(decVal)}

çµæœï¼š
åé€²åˆ¶â€¯=â€¯${decVal}
åå…­é€²åˆ¶â€¯=â€¯${hexVal}`;
    }
    else if(type==="hex"){
      let s=hexInput.value.trim();
      if(!/^[0-9a-fA-F]+$/.test(s)){alert("è«‹è¼¸å…¥æ­£ç¢ºåå…­é€²åˆ¶æ•¸å­—ï¼ˆ0â€“9,â€¯Aâ€“Fï¼‰");return;}
      decVal=parseInt(s,16);
      binVal=decVal.toString(2);
      decInput.value=decVal;
      binInput.value=binVal;

      log=`ğŸ§®â€¯å¾åå…­é€²åˆ¶â€¯${s.toUpperCase()}â€¯è½‰æ›ï¼š
-----------------------------------
[åå…­é€² â†’ åé€²]
${hexToDecimalSteps(s)}

-----------------------------------
[åé€² â†’ äºŒé€²]
${toBinarySteps(decVal)}

çµæœï¼š
åé€²åˆ¶â€¯=â€¯${decVal}
äºŒé€²åˆ¶â€¯=â€¯${binVal}`;
    }

    // æ›´æ–°è¼¸å‡ºæ¬„
    if(type==="dec"){binInput.value=binVal;hexInput.value=hexVal;}
    steps.textContent=log;

  }catch(e){
    alert("ç™¼ç”ŸéŒ¯èª¤ï¼š" + e);
  }
}
</script>

</body>
</html>
